var __decorate=this&&this.__decorate||function(t,e,i,n){var s,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,n);else for(var o=t.length-1;0<=o;o--)(s=t[o])&&(r=(a<3?s(r):3<a?s(e,i,r):s(e,i))||r);return 3<a&&r&&Object.defineProperty(e,i,r),r},__extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),_createClass=function(){function n(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(t,e,i){return e&&n(t.prototype,e),i&&n(t,i),t}}();function _possibleConstructorReturn(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}!function(t){var e,i;e=t.utils||(t.utils={}),i=function(){function t(){_classCallCheck(this,t),this._obj={}}return _createClass(t,[{key:"set",value:function(t,e){this._obj[t]=e}},{key:"get",value:function(t){var e=this._obj[t];return void 0!==e?e:null}},{key:"has",value:function(t){return this._obj.hasOwnProperty(t)}},{key:"remove",value:function(t){delete this._obj[t]}},{key:"clear",value:function(){this._obj={}}},{key:"keys",get:function(){var t=[];for(var e in this._obj)t.push(e);return t}},{key:"values",get:function(){var t=[];for(var e in this._obj)t.push(this._obj[e]);return t}}]),t}(),e.Dictionary=i}(Vejay||(Vejay={})),function(t){var e,i,n,s;e=t.utils||(t.utils={}),i=e.math||(e.math={}),n=[],s=function(){function s(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0;_classCallCheck(this,s),this.x=t,this.y=e,this.width=i,this.height=n}return _createClass(s,[{key:"copyFrom",value:function(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this}},{key:"setTo",value:function(t,e,i,n){return this.x=t,this.y=e,this.width=i,this.height=n,this}},{key:"contains",value:function(t,e){return this.x<=t&&this.x+this.width>=t&&this.y<=e&&this.y+this.height>=e}},{key:"intersection",value:function(t){return this.clone().$intersectInPlace(t)}},{key:"inflate",value:function(t,e){this.x-=t,this.width+=2*t,this.y-=e,this.height+=2*e}},{key:"$intersectInPlace",value:function(t){var e=this.x,i=this.y,n=t.x,s=t.y,a=Math.max(e,n),r=Math.min(e+this.width,n+t.width);if(a<=r){var o=Math.max(i,s),h=Math.min(i+this.height,s+t.height);if(o<=h)return this.setTo(a,o,r-a,h-o),this}return this.setEmpty(),this}},{key:"intersects",value:function(t){return Math.max(this.x,t.x)<=Math.min(this.right,t.right)&&Math.max(this.y,t.y)<=Math.min(this.bottom,t.bottom)}},{key:"isEmpty",value:function(){return this.width<=0||this.height<=0}},{key:"setEmpty",value:function(){this.x=0,this.y=0,this.width=0,this.height=0}},{key:"clone",value:function(){return new s(this.x,this.y,this.width,this.height)}},{key:"containsPoint",value:function(t){return this.x<=t.x&&this.x+this.width>t.x&&this.y<=t.y&&this.y+this.height>t.y}},{key:"containsRect",value:function(t){var e=t.x+t.width,i=t.y+t.height,n=this.x+this.width,s=this.y+this.height;return t.x>=this.x&&t.x<n&&t.y>=this.y&&t.y<s&&e>this.x&&e<=n&&i>this.y&&i<=s}},{key:"isIntersectRect",value:function(t){return t.x>=this.x&&t.x<=this.right||t.y>=this.y&&t.y<=this.bottom||t.right>=this.x&&t.right<=this.right||t.bottom>=this.y&&t.bottom<=this.bottom}},{key:"equals",value:function(t){return this===t||this.x===t.x&&this.y===t.y&&this.width===t.width&&this.height===t.height}},{key:"inflatePoint",value:function(t){this.inflate(t.x,t.y)}},{key:"offset",value:function(t,e){this.x+=t,this.y+=e}},{key:"offsetPoint",value:function(t){this.offset(t.x,t.y)}},{key:"toString",value:function(){return"(x="+this.x+", y="+this.y+", width="+this.width+", height="+this.height+")"}},{key:"union",value:function(t){var e=this.clone();if(t.isEmpty())return e;if(e.isEmpty())return e.copyFrom(t),e;var i=Math.min(e.x,t.x),n=Math.min(e.y,t.y);return e.setTo(i,n,Math.max(e.right,t.right)-i,Math.max(e.bottom,t.bottom)-n),e}},{key:"$getBaseWidth",value:function(t){var e=Math.abs(Math.cos(t)),i=Math.abs(Math.sin(t));return e*this.width+i*this.height}},{key:"$getBaseHeight",value:function(t){var e=Math.abs(Math.cos(t));return Math.abs(Math.sin(t))*this.width+e*this.height}},{key:"right",get:function(){return this.x+this.width},set:function(t){this.width=t-this.x}},{key:"bottom",get:function(){return this.y+this.height},set:function(t){this.height=t-this.y}},{key:"left",get:function(){return this.x},set:function(t){this.width+=this.x-t,this.x=t}},{key:"top",get:function(){return this.y},set:function(t){this.height+=this.y-t,this.y=t}},{key:"topLeft",get:function(){return new i.Point(this.left,this.top)},set:function(t){this.top=t.y,this.left=t.x}},{key:"bottomRight",get:function(){return new i.Point(this.right,this.bottom)},set:function(t){this.bottom=t.y,this.right=t.x}}],[{key:"release",value:function(t){t&&n.push(t)}},{key:"create",value:function(){var t=n.pop();return t||(t=new s),t}}]),s}(),i.Rectangle=s,i.$TempRectangle=new s}(Vejay||(Vejay={})),function(t){var e,c,i;e=t.utils||(t.utils={}),c=e.math||(e.math={}),(i=function(){function u(){_classCallCheck(this,u)}return _createClass(u,null,[{key:"getRand",value:function(t,e){return t+(e-t)*Math.random()}},{key:"getIntRand",value:function(t,e){return Math.floor(Math.random()*(e-t+1))+t}},{key:"roundN",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:2,i=Math.pow(10,e);return Math.round(t*i)/i}},{key:"getAngle",value:function(t,e,i,n){var s=n-e,a=i-t;return Math.atan2(s,a)*this.Rad2Deg}},{key:"isINSector",value:function(t,e,i,n,s,a){var r=t/2,o=e-r,h=e+r,c=u.getAngle(i,n,s,a);return o<h&&o<=c&&c<=h||h<o&&(o<=c||c<=h)}},{key:"getDistance",value:function(t,e,i,n){var s=(t-i)*(t-i)+(e-n)*(e-n);return Math.sqrt(s)}},{key:"isInRange",value:function(t,e,i){return t>i.x&&e>i.y&&t<i.x+i.width&&e<i.y+i.height}},{key:"getAnglePoint",value:function(t,e,i,n){var s=i*Math.PI/180,a=t+Math.sin(s)*n,r=e-Math.cos(s)*n;return new c.Point(a,r)}},{key:"getNearestPoint",value:function(t,e,i,n,s){var a=new c.Point;if(this.getDistance(t,e,i,n)<s)a.setTo(i-t,n-e);else{var r=(this.getAngle(t,e,i,n)+90)*Math.PI/180,o=Math.sin(r)*s,h=-Math.cos(r)*s;a.setTo(o,h)}return a}},{key:"get8Direction",value:function(t){return-45<=t&&t<45?6:45<=t&&t<135?2:135<=t||t<-135?4:-135<=t&&t<-45?8:void 0}},{key:"get8Direction2",value:function(t,e,i,n){var s=this.getAngle(t,e,i,n);return-45<=s&&s<45?6:45<=s&&s<135?2:135<=s||s<-135?4:-135<=s&&s<-45?8:void 0}},{key:"newGuid",get:function(){return this.num+=1,100===this.num&&(this.num=0),Date.now()+this.num.toString()}}]),u}()).TWO_PI=2*Math.PI,i.Deg2Rad=Math.PI/180,i.Rad2Deg=180/Math.PI,i.num=0,c.NumberUtils=i}(Vejay||(Vejay={})),function(t){var e,i,n,c,s,a;e=t.utils||(t.utils={}),i=e.math||(e.math={}),n=Math.PI,c=n/180,s=[],a=function(){function r(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:1,s=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,a=5<arguments.length&&void 0!==arguments[5]?arguments[5]:0;_classCallCheck(this,r),this.a=t,this.b=e,this.c=i,this.d=n,this.tx=s,this.ty=a}return _createClass(r,[{key:"clone",value:function(){return new r(this.a,this.b,this.c,this.d,this.tx,this.ty)}},{key:"concat",value:function(t){var e=this.a*t.a,i=0,n=0,s=this.d*t.d,a=this.tx*t.a+t.tx,r=this.ty*t.d+t.ty;0===this.b&&0===this.c&&0===t.b&&0===t.c||(e+=this.b*t.c,s+=this.c*t.b,i+=this.a*t.b+this.b*t.d,n+=this.c*t.a+this.d*t.c,a+=this.ty*t.c,r+=this.tx*t.b),this.a=e,this.b=i,this.c=n,this.d=s,this.tx=a,this.ty=r}},{key:"copyFrom",value:function(t){return this.a=t.a,this.b=t.b,this.c=t.c,this.d=t.d,this.tx=t.tx,this.ty=t.ty,this}},{key:"identity",value:function(){this.a=this.d=1,this.b=this.c=this.tx=this.ty=0}},{key:"invert",value:function(){this.$invertInto(this)}},{key:"$invertInto",value:function(t){var e=this.a,i=this.b,n=this.c,s=this.d,a=this.tx,r=this.ty;if(0==i&&0==n)return t.b=t.c=0,void(0==e||0==s?t.a=t.d=t.tx=t.ty=0:(e=t.a=1/e,s=t.d=1/s,t.tx=-e*a,t.ty=-s*r));var o=e*s-i*n;if(0!=o){o=1/o;var h=t.a=s*o;i=t.b=-i*o,n=t.c=-n*o,s=t.d=e*o,t.tx=-(h*a+n*r),t.ty=-(i*a+s*r)}else t.identity()}},{key:"rotate",value:function(t){if(0!=(t=+t)){t/=c;var e=Math.cos(t),i=Math.sin(t),n=this.a,s=this.b,a=this.c,r=this.d,o=this.tx,h=this.ty;this.a=n*e-s*i,this.b=n*i+s*e,this.c=a*e-r*i,this.d=a*i+r*e,this.tx=o*e-h*i,this.ty=o*i+h*e}}},{key:"scale",value:function(t,e){1!==t&&(this.a*=t,this.c*=t,this.tx*=t),1!==e&&(this.b*=e,this.d*=e,this.ty*=e)}},{key:"setTo",value:function(t,e,i,n,s,a){return this.a=t,this.b=e,this.c=i,this.d=n,this.tx=s,this.ty=a,this}},{key:"translate",value:function(t,e){this.tx+=t,this.ty+=e}},{key:"equals",value:function(t){return this.a==t.a&&this.b==t.b&&this.c==t.c&&this.d==t.d&&this.tx==t.tx&&this.ty==t.ty}},{key:"prepend",value:function(t,e,i,n,s,a){var r=this.tx;if(1!=t||0!=e||0!=i||1!=n){var o=this.a,h=this.c;this.a=o*t+this.b*i,this.b=o*e+this.b*n,this.c=h*t+this.d*i,this.d=h*e+this.d*n}return this.tx=r*t+this.ty*i+s,this.ty=r*e+this.ty*n+a,this}},{key:"append",value:function(t,e,i,n,s,a){var r=this.a,o=this.b,h=this.c,c=this.d;return 1==t&&0==e&&0==i&&1==n||(this.a=t*r+e*h,this.b=t*o+e*c,this.c=i*r+n*h,this.d=i*o+n*c),this.tx=s*r+a*h+this.tx,this.ty=s*o+a*c+this.ty,this}},{key:"toString",value:function(){return"(a="+this.a+", b="+this.b+", c="+this.c+", d="+this.d+", tx="+this.tx+", ty="+this.ty+")"}},{key:"getDeterminant",value:function(){return this.a*this.d-this.b*this.c}},{key:"$getScaleX",value:function(){var t=this;if(1==t.a&&0==t.b)return 1;var e=Math.sqrt(t.a*t.a+t.b*t.b);return this.getDeterminant()<0?-e:e}},{key:"$getScaleY",value:function(){var t=this;if(0==t.c&&1==t.d)return 1;var e=Math.sqrt(t.c*t.c+t.d*t.d);return this.getDeterminant()<0?-e:e}},{key:"$getSkewX",value:function(){return Math.atan2(this.d,this.c)-n/2}},{key:"$getSkewY",value:function(){return Math.atan2(this.b,this.a)}}],[{key:"release",value:function(t){t&&s.push(t)}},{key:"create",value:function(){var t=s.pop();return t||(t=new r),t}}]),r}(),i.Matrix=a,i.$TempMatrix=new a}(Vejay||(Vejay={})),function(t){var e,i,n,a,s;e=t.utils||(t.utils={}),i=e.math||(e.math={}),n=[],a=Math.PI/180,s=function(){function s(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;_classCallCheck(this,s),this.x=t,this.y=e}return _createClass(s,[{key:"setTo",value:function(t,e){return this.x=t,this.y=e,this}},{key:"clone",value:function(){return new s(this.x,this.y)}},{key:"equals",value:function(t){return this.x==t.x&&this.y==t.y}},{key:"copyFrom",value:function(t){this.x=t.x,this.y=t.y}},{key:"add",value:function(t){return new s(this.x+t.x,this.y+t.y)}},{key:"normalize",value:function(t){if(0!=this.x||0!=this.y){var e=t/this.length;this.x*=e,this.y*=e}}},{key:"offset",value:function(t,e){this.x+=t,this.y+=e}},{key:"subtract",value:function(t){return new s(this.x-t.x,this.y-t.y)}},{key:"toString",value:function(){return"(x="+this.x+", y="+this.y+")"}},{key:"length",get:function(){return Math.sqrt(this.x*this.x+this.y*this.y)}}],[{key:"release",value:function(t){t&&n.push(t)}},{key:"create",value:function(t,e){var i=n.pop();return i||(i=new s),i.setTo(t,e)}},{key:"distance",value:function(t,e){return Math.sqrt((t.x-e.x)*(t.x-e.x)+(t.y-e.y)*(t.y-e.y))}},{key:"interpolate",value:function(t,e,i){var n=1-i;return new s(t.x*i+e.x*n,t.y*i+e.y*n)}},{key:"polar",value:function(t,e){return new s(t*Math.cos(e/a),t*Math.sin(e/a))}}]),s}(),i.Point=s,i.$TempPoint=new s}(Vejay||(Vejay={})),function(t){var e,i;e=t.global||(t.global={}),(i=function t(){_classCallCheck(this,t)}).TouchNum=2,i.CtxType=0,e.GlobalData=i}(Vejay||(Vejay={})),function(h){var t,i,e,n;t=h.core||(h.core={}),i=t.base||(t.base={}),e=h.utils.Dictionary,(n=function(){function o(){_classCallCheck(this,o)}return _createClass(o,[{key:"addEventListener",value:function(t,e,i,n){var s=4<arguments.length&&void 0!==arguments[4]&&arguments[4],a=o._list.get(t);a||(a=[]);for(var r=0;r<a.length;r++)if(i===a[r][1])return;e instanceof h.display.Sprite&&h.event.Event.isMouseEvent(t)&&(e.mouseEnable=!0),a.push([e,i,n,s])}},{key:"removeEventListener",value:function(t,e,i){for(var n,s=o._list.get(t),a=0;a<s.length;a++)if(e===(n=s[a])[0]&&i===n[1])return s.splice(a,1),void(e instanceof h.display.Sprite&&h.event.Event.isMouseEvent(t)&&(e.mouseEnable=!1))}},{key:"removeEventListeners",value:function(t){o._list.remove(t)}},{key:"sendEvent",value:function(t,e){i.SingletonFactory.getInstance(h.process.EventProcess).addEvent(t,e)}}],[{key:"dispatch",value:function(t,e){var i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,n=this._list.get(t);if(n)for(var s,a,r,o,h=0;h<n.length;h++)a=(s=n[h])[0],i&&i!==a||(r=s[1],(o=s[2].slice(0)).unshift(e),r.apply(a,o),s[3]&&n.splice(h--,1))}}]),o}())._list=new e,i.EventDispatcher=n}(Vejay||(Vejay={})),function(t){var e,i,n;e=t.core||(t.core={}),i=e.base||(e.base={}),(n=function(){function t(){_classCallCheck(this,t)}return _createClass(t,null,[{key:"getInstance",value:function(t){for(var e,i=0;i<this._factory.length;i++)if((e=this._factory[i]).constructor===t)return e;return e=new t,this._factory.push(e),e}}]),t}())._factory=[],i.SingletonFactory=n}(Vejay||(Vejay={})),function(a){!function(t){var i=a.global.GlobalData,n=function t(){_classCallCheck(this,t)};t.Font=n;var e=function(t){function e(){return _classCallCheck(this,e),_possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return _inherits(e,n),_createClass(e,[{key:"setFont",value:function(t){var e=i.Ctx1;e.font=t,e.save()}}]),e}();t.FontCanvas=e;var s=function(t){function e(){return _classCallCheck(this,e),_possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return _inherits(e,n),e}();t.FontWebGL=s}(a.core||(a.core={}))}(Vejay||(Vejay={})),function(t){var e,i,n,s;e=t.display||(t.display={}),i=t.utils.math.Rectangle,n=t.core.base.EventDispatcher,s=function(t){function e(){_classCallCheck(this,e);var t=_possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t._x=0,t._y=0,t._scaleX=1,t._scaleY=1,t.pivotX=0,t.pivotY=0,t._rotation=0,t.rotationChange=!1,t.visible=!0,t._viewport=new i,t}return _inherits(e,n),_createClass(e,[{key:"pos",value:function(t,e){this._x===t&&this._y===e||(this._x=t,this._y=e,this.posChange=!0)}},{key:"scale",value:function(t,e){this._scaleX===t&&this._scaleY===e||(this._scaleX=t,this._scaleY=e,this.scaleChange=!0)}},{key:"render",value:function(t,e){}},{key:"x",get:function(){return this._x},set:function(t){this._x!==t&&(this._x=t,this.posChange=!0)}},{key:"y",get:function(){return this._y},set:function(t){this._y!==t&&(this._y=t,this.posChange=!0)}},{key:"scaleY",get:function(){return this._scaleY},set:function(t){this._scaleY!==t&&(this._scaleY=t,this.scaleChange=!0)}},{key:"scaleX",get:function(){return this._scaleX},set:function(t){this._scaleX!==t&&(this._scaleX=t,this.scaleChange=!0)}},{key:"rotation",get:function(){return this._rotation},set:function(t){this._rotation!==t&&(this._rotation=t,this.rotationChange=!0)}},{key:"viewport",get:function(){return this._viewport}}]),e}(),e.DisplayObject=s}(Vejay||(Vejay={})),function(t){var i,c,e;i=t.display||(t.display={}),c=t.global.GlobalData,e=function(t){function e(){_classCallCheck(this,e);var t=_possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t._children=[],t.parentViewport=i.Stage.viewport,t}return _inherits(e,i.DisplayObject),_createClass(e,[{key:"addChild",value:function(t){(t.parent=this)._children.push(t)}},{key:"removeChild",value:function(t){var e=this.parent.getIndex(t);this.parent.removeChildAt(e)}},{key:"removeChildAt",value:function(t){if(0<=t&&t<this._children.length){var e=this._children[t];return e.parent=null,this._children.splice(t,1),e}throw new RangeError("Invalid child index")}},{key:"getIndex",value:function(t){return this._children.indexOf(t)}},{key:"removeAll",value:function(){this._children.length=0}},{key:"removeSelf",value:function(){this.parent.removeChild(this)}},{key:"renderSelf",value:function(){}},{key:"render",value:function(t,e){if(this.visible){var i=this.width*Math.abs(this.scaleX),n=this.height*Math.abs(this.scaleY),s=t+this.x-this.pivotX*i,a=e+this.y-this.pivotY*n;if(this.scaleX<0&&(s+=i),this.scaleY<0&&(a+=n),this._viewport.setTo(s,a,i,n),this.parentViewport.isIntersectRect(this._viewport)){var r=c.Ctx1;this.setRotation(r,t+this.x,e+this.y),this.renderSelf(),r.restore();for(var o=this.children.length,h=0;h<o;h++){this.children[h].render(this.x+t,this.y+e)}}}}},{key:"setRotation",value:function(t,e,i){if(this.rotationChange){var n=.5*e,s=.5*i,a=n-n*Math.cos(this.rotation+45),r=s-s*Math.sin(this.rotation+45);t.translate(a,r),t.rotate(this.rotation)}}},{key:"numChildren",get:function(){return this._children.length}},{key:"children",get:function(){return this._children}},{key:"asImage",get:function(){return this instanceof Image?this:null}}]),e}(),i.DisplayObjectContainer=e}(Vejay||(Vejay={})),function(t){var i,e;i=t.display||(t.display={}),e=function(t){function e(){_classCallCheck(this,e);var t=_possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t._mouseEnable=!1,t.mouseThrough=!0,t}return _inherits(e,i.DisplayObjectContainer),_createClass(e,[{key:"mouseEnable",get:function(){return this._mouseEnable},set:function(t){(this._mouseEnable=t)&&this.parent&&(this.parent.mouseEnable=!0)}}]),e}(),i.Sprite=e}(Vejay||(Vejay={})),function(t){var i,e,n;i=t.display||(t.display={}),e=i.component||(i.component={}),n=function(t){function e(){_classCallCheck(this,e);var t=_possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.mouseThrough=!1,t}return _inherits(e,i.Sprite),e}(),e.Component=n}(Vejay||(Vejay={})),function(t){var i,n,s,e;i=t.display||(t.display={}),n=t.utils.math.Rectangle,s=t.global.GlobalData,e=function(t){function e(){_classCallCheck(this,e);var t=_possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.x=.5*(s.ScreenWidth-s.StageWidth),t.y=.5*(s.ScreenHeight-s.StageHeight),t.width=s.StageWidth,t.height=s.StageHeight,e.viewport=new n(t.x,t.y,t.width,t.height),t}return _inherits(e,i.Sprite),e}(),i.Stage=e}(Vejay||(Vejay={})),function(t){var e,n,h,i;e=t.display||(t.display={}),n=e.component||(e.component={}),h=t.global.GlobalData,i=function(t){function i(t){_classCallCheck(this,i);var e=_possibleConstructorReturn(this,(i.__proto__||Object.getPrototypeOf(i)).call(this));return e._img=new HTMLImageElement,e._img.src=t,e._img.onload=e.onLoad,e._img.onerror=e.onError,e}return _inherits(i,n.Component),_createClass(i,[{key:"skin",value:function(t){}},{key:"onLoad",value:function(){this.width=void 0===this.width?this._img.width:this.width,this.height=void 0===this.height?this._img.height:this.height}},{key:"onError",value:function(){}},{key:"renderSelf",value:function(){var t=this._viewport;if(this.parentViewport.containsRect(t))this.drawImage(0,0,t.width,t.height,t.x,t.y,t.width,t.height);else{var e=void 0,i=void 0,n=void 0,s=void 0,a=void 0,r=void 0,o=void 0,h=void 0;t.left<this.parentViewport.left?(e=this.parentViewport.left-t.left,a=this.parentViewport.left,n=o=t.right-this.parentViewport.left):(e=0,a=t.x,n=o=t.width),t.top<this.parentViewport.top?(i=this.parentViewport.top-t.top,r=this.parentViewport.top,s=h=t.bottom-this.parentViewport.top):(i=0,r=t.y,s=h=t.height),t.right>this.parentViewport.right&&(n=o=this.parentViewport.right-t.left),t.bottom>this.parentViewport.bottom&&(s=h=this.parentViewport.bottom-t.top),this.drawImage(e,i,n,s,a,r,o,h)}}},{key:"drawImage",value:function(t,e,i,n,s,a,r,o){h.Ctx1.drawImage(this._img,t,e,i,n,s,a,r,o)}}]),i}(),n.Image=i}(Vejay||(Vejay={}));var stage,loader,Vejay,SingletonFactory=Vejay.core.base.SingletonFactory;!function(a){var r=a.global.GlobalData,t=function(){function s(t,e,i,n){_classCallCheck(this,s),r.StageWidth=t,r.ScreenHeight=e,r.ScreenWidth=i||t,r.ScreenHeight=n||e,this.initContextRender(),stage=SingletonFactory.getInstance(a.display.Stage),SingletonFactory.getInstance(a.event.MouseEvent).init()}return _createClass(s,[{key:"initContextRender",value:function(){var t=wx.createCanvas(),e=t.getContext("webgl");e?this.initWebGl(e):this.initCanvas(t)}},{key:"initWebGl",value:function(t){r.Ctx0=t}},{key:"initCanvas",value:function(t){var e=t.getContext("2d");r.Ctx1=e,r.CtxType=1}}]),s}();a.init=t}(Vejay||(Vejay={})),function(t){var e,i;e=t.core||(t.core={}),i=function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"clone",value:function(){return t.copy(this,new t)}}],[{key:"copy",value:function(t,e){for(var i in t)e[i]=t[i];return e}}]),t}(),e.Vo=i}(Vejay||(Vejay={})),function(t){var e,i;e=t.event||(t.event={}),(i=function(){function n(t,e,i){_classCallCheck(this,n),this.touch=t,e&&(this.currentTarget=e),i&&(this.target=i)}return _createClass(n,null,[{key:"isMouseEvent",value:function(t){return-1<this.MOUSE_EVENT.indexOf(t)}}]),n}()).MOUSE_EVENT=["v_mouse_click","v_mouse_down","v_mouse_up","v_mouse_move"],i.MOUSE_CLICK=i.MOUSE_EVENT[0],i.MOUSE_DOWN=i.MOUSE_EVENT[1],i.MOUSE_UP=i.MOUSE_EVENT[2],i.MOUSE_MOVE=i.MOUSE_EVENT[3],e.Event=i}(Vejay||(Vejay={})),function(t){var e,i,n;e=t.event||(t.event={}),i=t.utils.Dictionary,n=function(){function t(){_classCallCheck(this,t),this._targets=new i}return _createClass(t,[{key:"addTarget",value:function(t,e){this._targets.set(t.toString(),e)}},{key:"getAndRemove",value:function(t){var e=this._targets.get(t.toString());return e&&this._targets.remove(t.toString()),e}},{key:"targets",get:function(){return this._targets}}]),t}(),e.EventModel=n}(Vejay||(Vejay={})),function(e){var i,o,h,c,t;o=i=e.event||(e.event={}),h=e.core.base.EventDispatcher,c=e.global.GlobalData,t=function(){function t(){_classCallCheck(this,t),this._stage=SingletonFactory.getInstance(e.display.Stage),this._model=SingletonFactory.getInstance(i.EventModel)}return _createClass(t,[{key:"init",value:function(){wx.onTouchStart(this.onTouchStart),wx.onTouchMove(this.onTouchMove),wx.onTouchEnd(this.onTouchEnd),wx.onTouchCancel(this.onTouchCancel)}},{key:"onTouchStart",value:function(t){for(var e,i,n=t.touches,s=0;s<c.TouchNum;s++)if(e=n[s],(i=this.searchTarget(this._stage,e.screenX,e.screenY))[0]){var a=new o.Event(e,i[0],i[1]);h.dispatch(o.Event.MOUSE_DOWN,a,i[1]),this._model.addTarget(e.identifier,i)}}},{key:"onTouchMove",value:function(t){for(var e,i=t.touches,n=0;n<c.TouchNum;n++){e=i[n];var s=new o.Event(e);h.dispatch(o.Event.MOUSE_MOVE,s)}}},{key:"onTouchEnd",value:function(t){for(var e,i,n,s=t.touches,a=0;a<c.TouchNum;a++){if(e=s[a],(i=this.searchTarget(this._stage,e.screenX,e.screenY))[0]){var r=new o.Event(e,i[0],i[1]);h.dispatch(o.Event.MOUSE_UP,r,i[1])}if((n=this._model.getAndRemove(e.identifier))&&n[1].viewport.contains(e.screenX,e.screenY)){r=new o.Event(e,n[0],n[1]);h.dispatch(o.Event.MOUSE_CLICK,r,n[1])}}}},{key:"onTouchCancel",value:function(t){for(var e=t.touches,i=this._model.targets,n=0;n<e.length;n++)i.remove(e[n].identifier.toString())}},{key:"searchTarget",value:function(t,e,i){for(var n,s,a,r=t.numChildren-1;0<=r;r--)if((n=t[r]).mouseEnable&&n.viewport.contains(e,i))return void((a=n).mouseThrough&&(s=n,this.searchTarget(n,e,i)));return!s&&a&&(s=a),[s,a]}}]),t}(),o.MouseEvent=t}(Vejay||(Vejay={})),function(t){var e,i,n;e=t.display||(t.display={}),i=t.global.GlobalData,n=function(){function t(){_classCallCheck(this,t),t._instance?console.error("get instance instead of new"):(this.ctx0=i.Ctx0,this.ctx1=i.Ctx1)}return _createClass(t,[{key:"scale",value:function(t,e){}}],[{key:"instance",get:function(){return this._instance||(this._instance=new t),this._instance}}]),t}(),e.RenderContext=n}(Vejay||(Vejay={})),function(t){var e,i;e=t.manager||(t.manager={}),(i=function(){function r(){_classCallCheck(this,r)}return _createClass(r,null,[{key:"start",value:function(){if(void 0===r._fps){r._spf=1e3/(r._fps=60);for(var t=0;t<3;t++)r._processList[t]={},r._priorityTime[t]=1e3/(24-24*t/3);r._frameCount=0,r._lastFrameTimestamp=Date.now(),window.requestAnimationFrame(r.onEnterFrame.bind(this))}}},{key:"add",value:function(t,e,i){var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:r.NORMAL;if(void 0!==r._processList[n][t])throw new Error("已经注册过process");r._processList[n][t]=e.bind(i)}},{key:"remove",value:function(t){for(var e=0;e<r._processList.length;e++)if(void 0!==r._processList[e][t]){delete r._processList[e][t];break}}},{key:"onEnterFrame",value:function(){var t=Date.now(),e=t-r._lastFrameTimestamp;r._time+=e*r.frameRate,r._serverTime+=e,r._frameCount++,r.process(e,e,1),r._currentFrameTime=Date.now()-r._lastFrameTimestamp,r._lastFrameTimestamp=t,window.requestAnimationFrame(r.onEnterFrame.bind(this))}},{key:"process",value:function(t,e,i){for(var n in r._deltaTime=e,r._processList[r.REAL_TIME])r.callbackHandler(r._processList[r.REAL_TIME][n],e);for(var s=r.NORMAL;r.IDLE<=s;--s)if(!(t>r._priorityTime[s]&&i<=1))for(var a in r._processList[s])r.callbackHandler(r._processList[s][a],e)}},{key:"callbackHandler",value:function(t,e){if(0==t.length)t();else if(1==t.length)t(e);else{if(2!=t.length)throw new Error;t(r._time,e)}}},{key:"time",get:function(){return r._time}}]),r}()).REAL_TIME=2,i.NORMAL=1,i.IDLE=0,i.frameRate=1,i._deltaTime=0,i._isInterpolation=!1,i._processList=[],i._priorityTime=[],i._lastFrameTimestamp=0,i._time=0,i._serverTime=0,i.SAMPLE_COUNT=10,i._frameAvgScoreIndex=0,i._frameAvgScore=[],e.FrameManager=i}(Vejay||(Vejay={})),function(t){var e,i,n;e=t.process||(t.process={}),i=t.core.base.EventDispatcher,n=function(){function t(){_classCallCheck(this,t),this._msg=[]}return _createClass(t,[{key:"addEvent",value:function(t,e){this._msg.push([t,e])}},{key:"clear",value:function(){this._msg.length=0}},{key:"process",value:function(){for(var t;0<this._msg.length;)t=this._msg.shift(),i.dispatch(t[0],t[1])}}]),t}(),e.EventProcess=n}(Vejay||(Vejay={})),function(t,e){var i=e();t&&t.Vejay||(("undefined"!=typeof GameGlobal?GameGlobal:"undefined"!=typeof window?window:this).Vejay=i,"object"==typeof exports&&"object"==typeof module?module.exports=i:"function"==typeof define&&define.amd?define(["Vejay"],e):"object"==typeof exports?exports.Vejay=i:t.Vejay=i)}(this,function(){return Vejay});