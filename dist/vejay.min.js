var utils,common,core,display,__decorate=this&&this.__decorate||function(t,e,i,n){var s,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,n);else for(var h=t.length-1;0<=h;h--)(s=t[h])&&(r=(a<3?s(r):3<a?s(e,i,r):s(e,i))||r);return 3<a&&r&&Object.defineProperty(e,i,r),r},__extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),_createClass=function(){function n(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(t,e,i){return e&&n(t.prototype,e),i&&n(t,i),t}}();function _possibleConstructorReturn(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}!function(t){var e=function(){function t(){_classCallCheck(this,t),this._obj={}}return _createClass(t,[{key:"set",value:function(t,e){this._obj[t]=e}},{key:"get",value:function(t){var e=this._obj[t];return void 0!==e?e:null}},{key:"has",value:function(t){return this._obj.hasOwnProperty(t)}},{key:"remove",value:function(t){delete this._obj[t]}},{key:"clear",value:function(){this._obj={}}},{key:"keys",get:function(){var t=[];for(var e in this._obj)t.push(e);return t}},{key:"values",get:function(){var t=[];for(var e in this._obj)t.push(this._obj[e]);return t}}]),t}();t.Dictionary=e}(utils||(utils={})),function(t){var e,i,n;e=t.math||(t.math={}),i=[],n=function(){function s(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0;_classCallCheck(this,s),this.x=t,this.y=e,this.width=i,this.height=n}return _createClass(s,[{key:"copyFrom",value:function(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this}},{key:"setTo",value:function(t,e,i,n){return this.x=t,this.y=e,this.width=i,this.height=n,this}},{key:"contains",value:function(t,e){return this.x<=t&&this.x+this.width>=t&&this.y<=e&&this.y+this.height>=e}},{key:"intersection",value:function(t){return this.clone().$intersectInPlace(t)}},{key:"inflate",value:function(t,e){this.x-=t,this.width+=2*t,this.y-=e,this.height+=2*e}},{key:"$intersectInPlace",value:function(t){var e=this.x,i=this.y,n=t.x,s=t.y,a=Math.max(e,n),r=Math.min(e+this.width,n+t.width);if(a<=r){var h=Math.max(i,s),o=Math.min(i+this.height,s+t.height);if(h<=o)return this.setTo(a,h,r-a,o-h),this}return this.setEmpty(),this}},{key:"intersects",value:function(t){return Math.max(this.x,t.x)<=Math.min(this.right,t.right)&&Math.max(this.y,t.y)<=Math.min(this.bottom,t.bottom)}},{key:"isEmpty",value:function(){return this.width<=0||this.height<=0}},{key:"setEmpty",value:function(){this.x=0,this.y=0,this.width=0,this.height=0}},{key:"clone",value:function(){return new s(this.x,this.y,this.width,this.height)}},{key:"containsPoint",value:function(t){return this.x<=t.x&&this.x+this.width>t.x&&this.y<=t.y&&this.y+this.height>t.y}},{key:"containsRect",value:function(t){var e=t.x+t.width,i=t.y+t.height,n=this.x+this.width,s=this.y+this.height;return t.x>=this.x&&t.x<n&&t.y>=this.y&&t.y<s&&e>this.x&&e<=n&&i>this.y&&i<=s}},{key:"isIntersectRect",value:function(t){return t.x>=this.x&&t.x<=this.right||t.y>=this.y&&t.y<=this.bottom||t.right>=this.x&&t.right<=this.right||t.bottom>=this.y&&t.bottom<=this.bottom}},{key:"equals",value:function(t){return this===t||this.x===t.x&&this.y===t.y&&this.width===t.width&&this.height===t.height}},{key:"inflatePoint",value:function(t){this.inflate(t.x,t.y)}},{key:"offset",value:function(t,e){this.x+=t,this.y+=e}},{key:"offsetPoint",value:function(t){this.offset(t.x,t.y)}},{key:"toString",value:function(){return"(x="+this.x+", y="+this.y+", width="+this.width+", height="+this.height+")"}},{key:"union",value:function(t){var e=this.clone();if(t.isEmpty())return e;if(e.isEmpty())return e.copyFrom(t),e;var i=Math.min(e.x,t.x),n=Math.min(e.y,t.y);return e.setTo(i,n,Math.max(e.right,t.right)-i,Math.max(e.bottom,t.bottom)-n),e}},{key:"$getBaseWidth",value:function(t){var e=Math.abs(Math.cos(t)),i=Math.abs(Math.sin(t));return e*this.width+i*this.height}},{key:"$getBaseHeight",value:function(t){var e=Math.abs(Math.cos(t));return Math.abs(Math.sin(t))*this.width+e*this.height}},{key:"right",get:function(){return this.x+this.width},set:function(t){this.width=t-this.x}},{key:"bottom",get:function(){return this.y+this.height},set:function(t){this.height=t-this.y}},{key:"left",get:function(){return this.x},set:function(t){this.width+=this.x-t,this.x=t}},{key:"top",get:function(){return this.y},set:function(t){this.height+=this.y-t,this.y=t}},{key:"topLeft",get:function(){return new e.Point(this.left,this.top)},set:function(t){this.top=t.y,this.left=t.x}},{key:"bottomRight",get:function(){return new e.Point(this.right,this.bottom)},set:function(t){this.bottom=t.y,this.right=t.x}}],[{key:"release",value:function(t){t&&i.push(t)}},{key:"create",value:function(){var t=i.pop();return t||(t=new s),t}}]),s}(),e.Rectangle=n,e.$TempRectangle=new n}(utils||(utils={})),function(t){var c,e;c=t.math||(t.math={}),(e=function(){function u(){_classCallCheck(this,u)}return _createClass(u,null,[{key:"getRand",value:function(t,e){return t+(e-t)*Math.random()}},{key:"getIntRand",value:function(t,e){return Math.floor(Math.random()*(e-t+1))+t}},{key:"roundN",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:2,i=Math.pow(10,e);return Math.round(t*i)/i}},{key:"getAngle",value:function(t,e,i,n){var s=n-e,a=i-t;return Math.atan2(s,a)*this.Rad2Deg}},{key:"isINSector",value:function(t,e,i,n,s,a){var r=t/2,h=e-r,o=e+r,c=u.getAngle(i,n,s,a);return h<o&&h<=c&&c<=o||o<h&&(h<=c||c<=o)}},{key:"getDistance",value:function(t,e,i,n){var s=(t-i)*(t-i)+(e-n)*(e-n);return Math.sqrt(s)}},{key:"isInRange",value:function(t,e,i){return t>i.x&&e>i.y&&t<i.x+i.width&&e<i.y+i.height}},{key:"getAnglePoint",value:function(t,e,i,n){var s=i*Math.PI/180,a=t+Math.sin(s)*n,r=e-Math.cos(s)*n;return new c.Point(a,r)}},{key:"getNearestPoint",value:function(t,e,i,n,s){var a=new c.Point;if(this.getDistance(t,e,i,n)<s)a.setTo(i-t,n-e);else{var r=(this.getAngle(t,e,i,n)+90)*Math.PI/180,h=Math.sin(r)*s,o=-Math.cos(r)*s;a.setTo(h,o)}return a}},{key:"get8Direction",value:function(t){return-45<=t&&t<45?6:45<=t&&t<135?2:135<=t||t<-135?4:-135<=t&&t<-45?8:void 0}},{key:"get8Direction2",value:function(t,e,i,n){var s=this.getAngle(t,e,i,n);return-45<=s&&s<45?6:45<=s&&s<135?2:135<=s||s<-135?4:-135<=s&&s<-45?8:void 0}},{key:"newGuid",get:function(){return this.num+=1,100===this.num&&(this.num=0),Date.now()+this.num.toString()}}]),u}()).TWO_PI=2*Math.PI,e.Deg2Rad=Math.PI/180,e.Rad2Deg=180/Math.PI,e.num=0,c.NumberUtils=e}(utils||(utils={})),function(t){var e,i,c,n,s;e=t.math||(t.math={}),i=Math.PI,c=i/180,n=[],s=function(){function r(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:1,s=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,a=5<arguments.length&&void 0!==arguments[5]?arguments[5]:0;_classCallCheck(this,r),this.a=t,this.b=e,this.c=i,this.d=n,this.tx=s,this.ty=a}return _createClass(r,[{key:"clone",value:function(){return new r(this.a,this.b,this.c,this.d,this.tx,this.ty)}},{key:"concat",value:function(t){var e=this.a*t.a,i=0,n=0,s=this.d*t.d,a=this.tx*t.a+t.tx,r=this.ty*t.d+t.ty;0===this.b&&0===this.c&&0===t.b&&0===t.c||(e+=this.b*t.c,s+=this.c*t.b,i+=this.a*t.b+this.b*t.d,n+=this.c*t.a+this.d*t.c,a+=this.ty*t.c,r+=this.tx*t.b),this.a=e,this.b=i,this.c=n,this.d=s,this.tx=a,this.ty=r}},{key:"copyFrom",value:function(t){return this.a=t.a,this.b=t.b,this.c=t.c,this.d=t.d,this.tx=t.tx,this.ty=t.ty,this}},{key:"identity",value:function(){this.a=this.d=1,this.b=this.c=this.tx=this.ty=0}},{key:"invert",value:function(){this.$invertInto(this)}},{key:"$invertInto",value:function(t){var e=this.a,i=this.b,n=this.c,s=this.d,a=this.tx,r=this.ty;if(0==i&&0==n)return t.b=t.c=0,void(0==e||0==s?t.a=t.d=t.tx=t.ty=0:(e=t.a=1/e,s=t.d=1/s,t.tx=-e*a,t.ty=-s*r));var h=e*s-i*n;if(0!=h){h=1/h;var o=t.a=s*h;i=t.b=-i*h,n=t.c=-n*h,s=t.d=e*h,t.tx=-(o*a+n*r),t.ty=-(i*a+s*r)}else t.identity()}},{key:"rotate",value:function(t){if(0!==(t=+t)){t/=c;var e=Math.cos(t),i=Math.sin(t),n=this.a,s=this.b,a=this.c,r=this.d,h=this.tx,o=this.ty;this.a=n*e-s*i,this.b=n*i+s*e,this.c=a*e-r*i,this.d=a*i+r*e,this.tx=h*e-o*i,this.ty=h*i+o*e}}},{key:"scale",value:function(t,e){1!==t&&(this.a*=t,this.c*=t,this.tx*=t),1!==e&&(this.b*=e,this.d*=e,this.ty*=e)}},{key:"setTo",value:function(t,e,i,n,s,a){return this.a=t,this.b=e,this.c=i,this.d=n,this.tx=s,this.ty=a,this}},{key:"translate",value:function(t,e){this.tx+=t,this.ty+=e}},{key:"equals",value:function(t){return this.a==t.a&&this.b==t.b&&this.c==t.c&&this.d==t.d&&this.tx==t.tx&&this.ty==t.ty}},{key:"prepend",value:function(t,e,i,n,s,a){var r=this.tx;if(1!=t||0!=e||0!=i||1!=n){var h=this.a,o=this.c;this.a=h*t+this.b*i,this.b=h*e+this.b*n,this.c=o*t+this.d*i,this.d=o*e+this.d*n}return this.tx=r*t+this.ty*i+s,this.ty=r*e+this.ty*n+a,this}},{key:"append",value:function(t,e,i,n,s,a){var r=this.a,h=this.b,o=this.c,c=this.d;return 1==t&&0==e&&0==i&&1==n||(this.a=t*r+e*o,this.b=t*h+e*c,this.c=i*r+n*o,this.d=i*h+n*c),this.tx=s*r+a*o+this.tx,this.ty=s*h+a*c+this.ty,this}},{key:"toString",value:function(){return"(a="+this.a+", b="+this.b+", c="+this.c+", d="+this.d+", tx="+this.tx+", ty="+this.ty+")"}},{key:"getDeterminant",value:function(){return this.a*this.d-this.b*this.c}},{key:"$getScaleX",value:function(){var t=this;if(1==t.a&&0==t.b)return 1;var e=Math.sqrt(t.a*t.a+t.b*t.b);return this.getDeterminant()<0?-e:e}},{key:"$getScaleY",value:function(){var t=this;if(0==t.c&&1==t.d)return 1;var e=Math.sqrt(t.c*t.c+t.d*t.d);return this.getDeterminant()<0?-e:e}},{key:"$getSkewX",value:function(){return Math.atan2(this.d,this.c)-i/2}},{key:"$getSkewY",value:function(){return Math.atan2(this.b,this.a)}}],[{key:"release",value:function(t){t&&n.push(t)}},{key:"create",value:function(){var t=n.pop();return t||(t=new r),t}}]),r}(),e.Matrix=s,e.$TempMatrix=new s}(utils||(utils={})),function(t){var e,n,i,s;e=t.math||(t.math={}),n=[],i=Math.PI/180,s=function(){function s(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;_classCallCheck(this,s),this.x=t,this.y=e}return _createClass(s,[{key:"setTo",value:function(t,e){return this.x=t,this.y=e,this}},{key:"clone",value:function(){return new s(this.x,this.y)}},{key:"equals",value:function(t){return this.x==t.x&&this.y==t.y}},{key:"copyFrom",value:function(t){this.x=t.x,this.y=t.y}},{key:"add",value:function(t){return new s(this.x+t.x,this.y+t.y)}},{key:"normalize",value:function(t){if(0!=this.x||0!=this.y){var e=t/this.length;this.x*=e,this.y*=e}}},{key:"offset",value:function(t,e){this.x+=t,this.y+=e}},{key:"subtract",value:function(t){return new s(this.x-t.x,this.y-t.y)}},{key:"toString",value:function(){return"(x="+this.x+", y="+this.y+")"}},{key:"length",get:function(){return Math.sqrt(this.x*this.x+this.y*this.y)}}],[{key:"release",value:function(t){t&&n.push(t)}},{key:"create",value:function(t,e){var i=n.pop();return i||(i=new s),i.setTo(t,e)}},{key:"distance",value:function(t,e){return Math.sqrt((t.x-e.x)*(t.x-e.x)+(t.y-e.y)*(t.y-e.y))}},{key:"interpolate",value:function(t,e,i){var n=1-i;return new s(t.x*i+e.x*n,t.y*i+e.y*n)}},{key:"polar",value:function(t,e){return new s(t*Math.cos(e/i),t*Math.sin(e/i))}}]),s}(),e.Point=s,e.$TempPoint=new s}(utils||(utils={})),function(t){var e=utils.Dictionary,i=function(){function h(){_classCallCheck(this,h)}return _createClass(h,[{key:"addEventListener",value:function(t,e,i,n){var s=4<arguments.length&&void 0!==arguments[4]&&arguments[4],a=h._list.get(t);a||(a=[]);for(var r=0;r<a.length;r++)if(i===a[r][1])return;a.push([e,i,n,s])}},{key:"removeEventListener",value:function(t,e,i){for(var n=h._list.get(t),s=0;s<n.length;s++)if(i===n[s][1])return void n.splice(s,1)}},{key:"removeEventListeners",value:function(t){h._list.remove(t)}},{key:"sendEvent",value:function(t,e){SingletonFactory.getInstance(process.EventProcess).addEvent(t,e)}}],[{key:"dispatch",value:function(t,e){var i=this._list.get(t);if(i)for(var n,s,a,r,h=0;h<i.length;h++)s=(n=i[h])[0],a=n[1],(r=n[2].slice(0)).unshift(e),a.apply(s,r),n[3]&&i.splice(h--,1)}}]),h}();i._list=new e,t.EventDispatcher=i}(core||(core={})),function(t){var e,i;e=t.base||(t.base={}),(i=function(){function t(){_classCallCheck(this,t)}return _createClass(t,null,[{key:"getInstance",value:function(t){for(var e,i=0;i<this._factory.length;i++)if((e=this._factory[i]).constructor===t)return e;return e=new t,this._factory.push(e),e}}]),t}())._factory=[],e.SingletonFactory=i}(core||(core={})),function(t){!function(t){var i=function t(){_classCallCheck(this,t)};t.Font=i;var e=function(t){function e(){return _classCallCheck(this,e),_possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return _inherits(e,i),_createClass(e,[{key:"setFont",value:function(t){var e=GlobalData.Ctx1;e.font=t,e.save()}}]),e}();t.FontCanvas=e;var n=function(t){function e(){return _classCallCheck(this,e),_possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return _inherits(e,i),e}();t.FontWebGL=n}(t.base||(t.base={}))}(core||(core={})),function(t){var e=function t(){_classCallCheck(this,t)};e.CtxType=0,t.GlobalData=e}(common||(common={})),function(t){var i=utils.math.Rectangle,n=core.EventDispatcher,e=function(t){function e(){_classCallCheck(this,e);var t=_possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t._x=0,t._y=0,t._scaleX=1,t._scaleY=1,t.pivotX=0,t.pivotY=0,t._rotation=0,t.rotationChange=!1,t.visible=!0,t.mouseEnable=!1,t._viewport=new i,t}return _inherits(e,n),_createClass(e,[{key:"pos",value:function(t,e){this._x===t&&this._y===e||(this._x=t,this._y=e,this.posChange=!0)}},{key:"scale",value:function(t,e){this._scaleX===t&&this._scaleY===e||(this._scaleX=t,this._scaleY=e,this.scaleChange=!0)}},{key:"render",value:function(t,e){}},{key:"x",get:function(){return this._x},set:function(t){this._x!==t&&(this._x=t,this.posChange=!0)}},{key:"y",get:function(){return this._y},set:function(t){this._y!==t&&(this._y=t,this.posChange=!0)}},{key:"scaleY",get:function(){return this._scaleY},set:function(t){this._scaleY!==t&&(this._scaleY=t,this.scaleChange=!0)}},{key:"scaleX",get:function(){return this._scaleX},set:function(t){this._scaleX!==t&&(this._scaleX=t,this.scaleChange=!0)}},{key:"rotation",get:function(){return this._rotation},set:function(t){this._rotation!==t&&(this._rotation=t,this.rotationChange=!0)}}]),e}();t.DisplayObject=e}(display||(display={})),function(i){var t=function(t){function e(){_classCallCheck(this,e);var t=_possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t._children=[],t.parentViewport=i.Stage.viewport,t}return _inherits(e,i.DisplayObject),_createClass(e,[{key:"addChild",value:function(t){(t.parent=this)._children.push(t)}},{key:"removeChild",value:function(t){var e=this.parent.getIndex(t);this.parent.removeChildAt(e)}},{key:"removeChildAt",value:function(t){if(0<=t&&t<this._children.length){var e=this._children[t];return e.parent=null,this._children.splice(t,1),e}throw new RangeError("Invalid child index")}},{key:"getIndex",value:function(t){return this._children.indexOf(t)}},{key:"removeAll",value:function(){this._children.length=0}},{key:"removeSelf",value:function(){this.parent.removeChild(this)}},{key:"renderSelf",value:function(){}},{key:"render",value:function(t,e){if(this.visible){var i=this.width*Math.abs(this.scaleX),n=this.height*Math.abs(this.scaleY),s=t+this.x-this.pivotX*i,a=e+this.y-this.pivotY*n;if(this.scaleX<0&&(s+=i),this.scaleY<0&&(a+=n),this._viewport.setTo(s,a,i,n),this.parentViewport.isIntersectRect(this._viewport)){var r=GlobalData.Ctx1;this.setRotation(r,t+this.x,e+this.y),this.renderSelf(),r.restore();for(var h=this.children.length,o=0;o<h;o++){this.children[o].render(this.x+t,this.y+e)}}}}},{key:"setRotation",value:function(t,e,i){if(this.rotationChange){var n=.5*e,s=.5*i,a=n-n*Math.cos(this.rotation+45),r=s-s*Math.sin(this.rotation+45);t.translate(a,r),t.rotate(this.rotation)}}},{key:"numChildren",get:function(){return this._children.length}},{key:"children",get:function(){return this._children}},{key:"asImage",get:function(){return this instanceof Image?this:null}}]),e}();i.DisplayObjectContainer=t}(display||(display={})),function(i){var n=utils.math.Rectangle,s=common.GlobalData,t=function(t){function e(){_classCallCheck(this,e);var t=_possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.x=.5*(s.ScreenWidth-s.StageWidth),t.y=.5*(s.ScreenHeight-s.StageHeight),t.width=s.StageWidth,t.height=s.StageHeight,e.viewport=new n(t.x,t.y,t.width,t.height),t}return _inherits(e,i.DisplayObjectContainer),e}();i.Stage=t}(display||(display={})),function(e){var t,i;t=e.component||(e.component={}),i=function(t){function i(t){_classCallCheck(this,i);var e=_possibleConstructorReturn(this,(i.__proto__||Object.getPrototypeOf(i)).call(this));return e._img=new HTMLImageElement,e._img.src=t,e._img.onload=e.onLoad,e}return _inherits(i,e.DisplayObjectContainer),_createClass(i,[{key:"onLoad",value:function(){this.width=void 0===this.width?this._img.width:this.width,this.height=void 0===this.height?this._img.height:this.height}},{key:"renderSelf",value:function(){var t=this._viewport;if(this.parentViewport.containsRect(t))this.drawImage(0,0,t.width,t.height,t.x,t.y,t.width,t.height);else{var e=void 0,i=void 0,n=void 0,s=void 0,a=void 0,r=void 0,h=void 0,o=void 0;t.left<this.parentViewport.left?(e=this.parentViewport.left-t.left,a=this.parentViewport.left,n=h=t.right-this.parentViewport.left):(e=0,a=t.x,n=h=t.width),t.top<this.parentViewport.top?(i=this.parentViewport.top-t.top,r=this.parentViewport.top,s=o=t.bottom-this.parentViewport.top):(i=0,r=t.y,s=o=t.height),t.right>this.parentViewport.right&&(n=h=this.parentViewport.right-t.left),t.bottom>this.parentViewport.bottom&&(s=o=this.parentViewport.bottom-t.top),this.drawImage(e,i,n,s,a,r,h,o)}}},{key:"drawImage",value:function(t,e,i,n,s,a,r,h){GlobalData.Ctx1.drawImage(this._img,t,e,i,n,s,a,r,h)}}]),i}(),t.Image=i}(display||(display={})),function(t){var e,i;e=t.base||(t.base={}),i=function(){function i(){_classCallCheck(this,i);var t=wx.createCanvas(),e=t.getContext("webgl");e?this.initWebGl(e):this.initCanvas(t)}return _createClass(i,[{key:"initWebGl",value:function(t){GlobalData.Ctx0=t}},{key:"initCanvas",value:function(t){var e=t.getContext("2d");GlobalData.Ctx1=e,GlobalData.CtxType=1}}]),i}(),e.Init=i}(core||(core={})),function(t){var e,i;e=t.base||(t.base={}),i=function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"clone",value:function(){return t.copy(this,new t)}}],[{key:"copy",value:function(t,e){for(var i in t)e[i]=t[i];return e}}]),t}(),e.Vo=i}(core||(core={})),function(t){var e=function(){function t(){_classCallCheck(this,t),t._instance?console.error("get instance instead of new"):(this.ctx0=GlobalData.Ctx0,this.ctx1=GlobalData.Ctx1)}return _createClass(t,[{key:"scale",value:function(t,e){}}],[{key:"instance",get:function(){return this._instance||(this._instance=new t),this._instance}}]),t}();t.RenderContext=e}(display||(display={}));var stage,loader,manager,process,GlobalData=common.GlobalData,SingletonFactory=core.base.SingletonFactory;function init(t,e,i,n){GlobalData.StageWidth=t,GlobalData.ScreenHeight=e,GlobalData.ScreenWidth=i||t,GlobalData.ScreenHeight=n||e,stage=SingletonFactory.getInstance(display.Stage),new core.base.Init}!function(t){var e=function(){function r(){_classCallCheck(this,r)}return _createClass(r,null,[{key:"start",value:function(){if(void 0===r._fps){r._spf=1e3/(r._fps=60);for(var t=0;t<3;t++)r._processList[t]={},r._priorityTime[t]=1e3/(24-24*t/3);r._frameCount=0,r._lastFrameTimestamp=Date.now(),window.requestAnimationFrame(r.onEnterFrame.bind(this))}}},{key:"add",value:function(t,e,i){var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:r.NORMAL;if(void 0!==r._processList[n][t])throw new Error("已经注册过process");r._processList[n][t]=e.bind(i)}},{key:"remove",value:function(t){for(var e=0;e<r._processList.length;e++)if(void 0!==r._processList[e][t]){delete r._processList[e][t];break}}},{key:"onEnterFrame",value:function(){var t=Date.now(),e=t-r._lastFrameTimestamp;r._time+=e*r.frameRate,r._serverTime+=e,r._frameCount++,r.process(e,e,1),r._currentFrameTime=Date.now()-r._lastFrameTimestamp,r._lastFrameTimestamp=t,window.requestAnimationFrame(r.onEnterFrame.bind(this))}},{key:"process",value:function(t,e,i){for(var n in r._deltaTime=e,r._processList[r.REAL_TIME])r.callbackHandler(r._processList[r.REAL_TIME][n],e);for(var s=r.NORMAL;r.IDLE<=s;--s)if(!(t>r._priorityTime[s]&&i<=1))for(var a in r._processList[s])r.callbackHandler(r._processList[s][a],e)}},{key:"callbackHandler",value:function(t,e){if(0==t.length)t();else if(1==t.length)t(e);else{if(2!=t.length)throw new Error;t(r._time,e)}}},{key:"time",get:function(){return r._time}}]),r}();e.REAL_TIME=2,e.NORMAL=1,e.IDLE=0,e.frameRate=1,e._deltaTime=0,e._isInterpolation=!1,e._processList=[],e._priorityTime=[],e._lastFrameTimestamp=0,e._time=0,e._serverTime=0,e.SAMPLE_COUNT=10,e._frameAvgScoreIndex=0,e._frameAvgScore=[],t.FrameManager=e}(manager||(manager={})),function(t){var e=core.EventDispatcher,i=function(){function t(){_classCallCheck(this,t),this._msg=[]}return _createClass(t,[{key:"addEvent",value:function(t,e){this._msg.push([t,e])}},{key:"clear",value:function(){this._msg.length=0}},{key:"process",value:function(){for(var t;0<this._msg.length;)t=this._msg.shift(),e.dispatch(t[0],t[1])}}]),t}();t.EventProcess=i}(process||(process={})),function(t,e){var i=e();t&&t.Vejay||(("undefined"!=typeof global?global:"undefined"!=typeof window?window:this).Vejay=i,"object"==typeof exports&&"object"==typeof module?module.exports=i:"function"==typeof define&&define.amd?define(["Vejay"],e):"object"==typeof exports?exports.Vejay=i:t.Vejay=i)}(this,function(){return Vejay});