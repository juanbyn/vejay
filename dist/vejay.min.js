var common,display,manager,__decorate=this&&this.__decorate||function(t,i,e,n){var s,h=arguments.length,r=h<3?i:null===n?n=Object.getOwnPropertyDescriptor(i,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,i,e,n);else for(var o=t.length-1;0<=o;o--)(s=t[o])&&(r=(h<3?s(r):3<h?s(i,e,r):s(i,e))||r);return 3<h&&r&&Object.defineProperty(i,e,r),r},__extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var e in i)i.hasOwnProperty(e)&&(t[e]=i[e])};return function(t,i){function e(){this.constructor=t}n(t,i),t.prototype=null===i?Object.create(i):(e.prototype=i.prototype,new e)}}(),_createClass=function(){function n(t,i){for(var e=0;e<i.length;e++){var n=i[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(t,i,e){return i&&n(t.prototype,i),e&&n(t,e),t}}();function _possibleConstructorReturn(t,i){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!i||"object"!=typeof i&&"function"!=typeof i?t:i}function _inherits(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Super expression must either be null or a function, not "+typeof i);t.prototype=Object.create(i&&i.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),i&&(Object.setPrototypeOf?Object.setPrototypeOf(t,i):t.__proto__=i)}function _classCallCheck(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}(common||(common={})).GlobalData=function t(){_classCallCheck(this,t)},function(t){var i=[],e=function(){function s(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,e=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0;_classCallCheck(this,s),this.x=t,this.y=i,this.width=e,this.height=n}return _createClass(s,[{key:"copyFrom",value:function(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this}},{key:"setTo",value:function(t,i,e,n){return this.x=t,this.y=i,this.width=e,this.height=n,this}},{key:"contains",value:function(t,i){return this.x<=t&&this.x+this.width>=t&&this.y<=i&&this.y+this.height>=i}},{key:"intersection",value:function(t){return this.clone().$intersectInPlace(t)}},{key:"inflate",value:function(t,i){this.x-=t,this.width+=2*t,this.y-=i,this.height+=2*i}},{key:"$intersectInPlace",value:function(t){var i=this.x,e=this.y,n=t.x,s=t.y,h=Math.max(i,n),r=Math.min(i+this.width,n+t.width);if(h<=r){var o=Math.max(e,s),a=Math.min(e+this.height,s+t.height);if(o<=a)return this.setTo(h,o,r-h,a-o),this}return this.setEmpty(),this}},{key:"intersects",value:function(t){return Math.max(this.x,t.x)<=Math.min(this.right,t.right)&&Math.max(this.y,t.y)<=Math.min(this.bottom,t.bottom)}},{key:"isEmpty",value:function(){return this.width<=0||this.height<=0}},{key:"setEmpty",value:function(){this.x=0,this.y=0,this.width=0,this.height=0}},{key:"clone",value:function(){return new s(this.x,this.y,this.width,this.height)}},{key:"containsPoint",value:function(t){return this.x<=t.x&&this.x+this.width>t.x&&this.y<=t.y&&this.y+this.height>t.y}},{key:"containsRect",value:function(t){var i=t.x+t.width,e=t.y+t.height,n=this.x+this.width,s=this.y+this.height;return t.x>=this.x&&t.x<n&&t.y>=this.y&&t.y<s&&i>this.x&&i<=n&&e>this.y&&e<=s}},{key:"equals",value:function(t){return this===t||this.x===t.x&&this.y===t.y&&this.width===t.width&&this.height===t.height}},{key:"inflatePoint",value:function(t){this.inflate(t.x,t.y)}},{key:"offset",value:function(t,i){this.x+=t,this.y+=i}},{key:"offsetPoint",value:function(t){this.offset(t.x,t.y)}},{key:"toString",value:function(){return"(x="+this.x+", y="+this.y+", width="+this.width+", height="+this.height+")"}},{key:"union",value:function(t){var i=this.clone();if(t.isEmpty())return i;if(i.isEmpty())return i.copyFrom(t),i;var e=Math.min(i.x,t.x),n=Math.min(i.y,t.y);return i.setTo(e,n,Math.max(i.right,t.right)-e,Math.max(i.bottom,t.bottom)-n),i}},{key:"$getBaseWidth",value:function(t){var i=Math.abs(Math.cos(t)),e=Math.abs(Math.sin(t));return i*this.width+e*this.height}},{key:"$getBaseHeight",value:function(t){var i=Math.abs(Math.cos(t));return Math.abs(Math.sin(t))*this.width+i*this.height}},{key:"right",get:function(){return this.x+this.width},set:function(t){this.width=t-this.x}},{key:"bottom",get:function(){return this.y+this.height},set:function(t){this.height=t-this.y}},{key:"left",get:function(){return this.x},set:function(t){this.width+=this.x-t,this.x=t}},{key:"top",get:function(){return this.y},set:function(t){this.height+=this.y-t,this.y=t}},{key:"topLeft",get:function(){return new t.Point(this.left,this.top)},set:function(t){this.top=t.y,this.left=t.x}},{key:"bottomRight",get:function(){return new t.Point(this.right,this.bottom)},set:function(t){this.bottom=t.y,this.right=t.x}}],[{key:"release",value:function(t){t&&i.push(t)}},{key:"create",value:function(){var t=i.pop();return t||(t=new s),t}}]),s}();t.Rectangle=e,t.$TempRectangle=new e}(math||(math={})),function(t){var i=math.Rectangle,e=function(){function t(){_classCallCheck(this,t),this.x=0,this.y=0,this.scaleX=1,this.scaleY=1,this._viewport=new i}return _createClass(t,[{key:"render",value:function(t,i,e){}}]),t}();t.DisplayObject=e}(display||(display={})),function(e){var t=function(t){function i(){_classCallCheck(this,i);var t=_possibleConstructorReturn(this,(i.__proto__||Object.getPrototypeOf(i)).call(this));return t._children=[],t}return _inherits(i,e.DisplayObject),_createClass(i,[{key:"addChild",value:function(t){this._children.push(t)}},{key:"removeChildAt",value:function(t){if(0<=t&&t<this._children.length){var i=this._children[t];return 0<=(t=this._children.indexOf(i))&&this._children.splice(t,1),i}throw new RangeError("Invalid child index")}},{key:"removeChildren",value:function(){this._children.length=0}},{key:"render",value:function(t,i,e){for(var n=this._children.length,s=0;s<n;s++){this._children[s].render(t,this.x+i,this.y+e)}}},{key:"numChildren",get:function(){return this._children.length}},{key:"getChildren",get:function(){return this._children}}]),i}();e.DisplayObjectContainer=t}(display||(display={})),function(t){var e=t.DisplayObjectContainer,n=math.Rectangle,s=common.GlobalData,i=function(t){function i(){_classCallCheck(this,i);var t=_possibleConstructorReturn(this,(i.__proto__||Object.getPrototypeOf(i)).call(this));if(i._instance)throw new Error("Error: Instantiation failed: Use SingletonClass.getInstance() instead of new.");return(i._instance=t).x=.5*(s.screenWidth-s.stageWidth),t.y=.5*(s.screenHeight-s.stageHeight),t.width=s.stageWidth,t.height=s.stageHeight,i.viewport=new n(t.x,t.y,t.width,t.height),t}return _inherits(i,e),_createClass(i,null,[{key:"inst",get:function(){return i._instance}}]),i}();i._instance=new i,t.Stage=i}(display||(display={})),function(i){var y=i.Stage,t=function(t){function e(t){_classCallCheck(this,e);var i=_possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return i._img=new Image,i._img.src=t,i._img.onload=function(){i.width=void 0===i.width?i._img.width:i.width,i.height=void 0===i.height?i._img.height:i.height},i}return _inherits(e,i.DisplayObject),_createClass(e,[{key:"render",value:function(t,i,e){this._viewport.setTo(i+this.x,e+this.y,this.width,this.height);var n=y.viewport;if(!(this._viewport.left>n.right||this._viewport.right<n.left||this._viewport.top>n.bottom||this._viewport.bottom<n.top))if(n.containsRect(this._viewport))this.drawImage(t,0,0,this._viewport.width,this._viewport.height,this._viewport.x,this._viewport.y,this._viewport.width,this._viewport.height);else{var s=void 0,h=void 0,r=void 0,o=void 0,a=void 0,c=void 0,u=void 0,l=void 0;this._viewport.left<n.left?(s=n.left-this._viewport.left,a=n.left,r=u=this._viewport.right-n.left):(s=0,a=this._viewport.x,r=u=this._viewport.width),this._viewport.top<n.top?(h=n.top-this._viewport.top,c=n.top,o=l=this._viewport.bottom-n.top):(h=0,c=this._viewport.y,o=l=this._viewport.height),this._viewport.right>n.right&&(r=u=n.right-this._viewport.left),this._viewport.bottom>n.bottom&&(o=l=n.bottom-this._viewport.top),this.drawImage(t,s,h,r,o,a,c,u,l)}}},{key:"drawImage",value:function(t,i,e,n,s,h,r,o,a){if(1!==this.scaleX||1!==this.scaleY)return t.translate(0,a+2*y.viewport.y),t.scale(this.scaleX,this.scaleY),t.drawImage(this._img,i,e,n,s,h,r,o,a),void t.setTransform(1,0,0,1,0,0);t.drawImage(this._img,i,e,n,s,h,r,o,a)}}]),e}();i.Bitmap=t}(display||(display={})),function(t){var i=function(){function r(){_classCallCheck(this,r)}return _createClass(r,null,[{key:"start",value:function(){if(void 0===r._fps){r._spf=1e3/(r._fps=60);for(var t=0;t<3;t++)r._processList[t]={},r._priorityTime[t]=1e3/(24-24*t/3);r._frameCount=0,r._lastFrameTimestamp=Date.now(),window.requestAnimationFrame(r.onEnterFrame.bind(this))}}},{key:"add",value:function(t,i,e){var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:r.NORMAL;if(void 0!==r._processList[n][t])throw new Error("已经注册过process");r._processList[n][t]=i.bind(e)}},{key:"remove",value:function(t){for(var i=0;i<r._processList.length;i++)if(void 0!==r._processList[i][t]){delete r._processList[i][t];break}}},{key:"onEnterFrame",value:function(){var t=Date.now(),i=t-r._lastFrameTimestamp;r._time+=i*r.frameRate,r._serverTime+=i,r._frameCount++,r.process(i,i,1),r._currentFrameTime=Date.now()-r._lastFrameTimestamp,r._lastFrameTimestamp=t,window.requestAnimationFrame(r.onEnterFrame.bind(this))}},{key:"process",value:function(t,i,e){for(var n in r._deltaTime=i,r._processList[r.REAL_TIME])r.callbackHandler(r._processList[r.REAL_TIME][n],i);for(var s=r.NORMAL;r.IDLE<=s;--s)if(!(t>r._priorityTime[s]&&e<=1))for(var h in r._processList[s])r.callbackHandler(r._processList[s][h],i)}},{key:"callbackHandler",value:function(t,i){if(0==t.length)t();else if(1==t.length)t(i);else{if(2!=t.length)throw new Error;t(r._time,i)}}},{key:"time",get:function(){return r._time}}]),r}();i.REAL_TIME=2,i.NORMAL=1,i.IDLE=0,i.frameRate=1,i._deltaTime=0,i._isInterpolation=!1,i._processList=[],i._priorityTime=[],i._lastFrameTimestamp=0,i._time=0,i._serverTime=0,i.SAMPLE_COUNT=10,i._frameAvgScoreIndex=0,i._frameAvgScore=[],t.FrameManager=i}(manager||(manager={})),function(t){var i=function(){function s(){_classCallCheck(this,s)}return _createClass(s,null,[{key:"isNumber",value:function(t){return"number"==typeof t&&!isNaN(t)}},{key:"sin",value:function(t){var i=Math.floor(t),e=i+1,n=s.sinInt(i);return i==t?n:(t-i)*s.sinInt(e)+(e-t)*n}},{key:"sinInt",value:function(t){return(t%=360)<0&&(t+=360),egret_sin_map[t]}},{key:"cos",value:function(t){var i=Math.floor(t),e=i+1,n=s.cosInt(i);return i==t?n:(t-i)*s.cosInt(e)+(e-t)*n}},{key:"cosInt",value:function(t){return(t%=360)<0&&(t+=360),egret_cos_map[t]}}]),s}();t.NumberUtils=i}(math||(math={}));for(var math,egret_sin_map={},egret_cos_map={},DEG_TO_RAD=Math.PI/180,NumberUtils_i=0;NumberUtils_i<360;NumberUtils_i++)egret_sin_map[NumberUtils_i]=Math.sin(NumberUtils_i*DEG_TO_RAD),egret_cos_map[NumberUtils_i]=Math.cos(NumberUtils_i*DEG_TO_RAD);egret_sin_map[90]=1,egret_cos_map[90]=0,egret_sin_map[180]=0,egret_cos_map[180]=-1,egret_sin_map[270]=-1,egret_cos_map[270]=0,Function.prototype.bind||(Function.prototype.bind=function(t){"function"!=typeof this&&console.error(1029);var i=Array.prototype.slice.call(arguments,1),e=this,n=function(){},s=function(){return e.apply(this instanceof n&&t?this:t,i.concat(Array.prototype.slice.call(arguments)))};return n.prototype=this.prototype,s.prototype=new n,s}),function(t){var i=function(){function t(){_classCallCheck(this,t)}return _createClass(t,null,[{key:"to",value:function(t,i){for(var e in i)t[e]=i[e];return t}}]),t}();t.Serialization=i}(math||(math={})),function(t){var i=Math.PI,c=i/180,e=[],n=function(){function r(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1,i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,e=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:1,s=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,h=5<arguments.length&&void 0!==arguments[5]?arguments[5]:0;_classCallCheck(this,r),this.a=t,this.b=i,this.c=e,this.d=n,this.tx=s,this.ty=h}return _createClass(r,[{key:"clone",value:function(){return new r(this.a,this.b,this.c,this.d,this.tx,this.ty)}},{key:"concat",value:function(t){var i=this.a*t.a,e=0,n=0,s=this.d*t.d,h=this.tx*t.a+t.tx,r=this.ty*t.d+t.ty;0===this.b&&0===this.c&&0===t.b&&0===t.c||(i+=this.b*t.c,s+=this.c*t.b,e+=this.a*t.b+this.b*t.d,n+=this.c*t.a+this.d*t.c,h+=this.ty*t.c,r+=this.tx*t.b),this.a=i,this.b=e,this.c=n,this.d=s,this.tx=h,this.ty=r}},{key:"copyFrom",value:function(t){return this.a=t.a,this.b=t.b,this.c=t.c,this.d=t.d,this.tx=t.tx,this.ty=t.ty,this}},{key:"identity",value:function(){this.a=this.d=1,this.b=this.c=this.tx=this.ty=0}},{key:"invert",value:function(){this.$invertInto(this)}},{key:"$invertInto",value:function(t){var i=this.a,e=this.b,n=this.c,s=this.d,h=this.tx,r=this.ty;if(0==e&&0==n)return t.b=t.c=0,void(0==i||0==s?t.a=t.d=t.tx=t.ty=0:(i=t.a=1/i,s=t.d=1/s,t.tx=-i*h,t.ty=-s*r));var o=i*s-e*n;if(0!=o){o=1/o;var a=t.a=s*o;e=t.b=-e*o,n=t.c=-n*o,s=t.d=i*o,t.tx=-(a*h+n*r),t.ty=-(e*h+s*r)}else t.identity()}},{key:"rotate",value:function(t){if(0!==(t=+t)){t/=c;var i=Math.cos(t),e=Math.sin(t),n=this.a,s=this.b,h=this.c,r=this.d,o=this.tx,a=this.ty;this.a=n*i-s*e,this.b=n*e+s*i,this.c=h*i-r*e,this.d=h*e+r*i,this.tx=o*i-a*e,this.ty=o*e+a*i}}},{key:"scale",value:function(t,i){1!==t&&(this.a*=t,this.c*=t,this.tx*=t),1!==i&&(this.b*=i,this.d*=i,this.ty*=i)}},{key:"setTo",value:function(t,i,e,n,s,h){return this.a=t,this.b=i,this.c=e,this.d=n,this.tx=s,this.ty=h,this}},{key:"translate",value:function(t,i){this.tx+=t,this.ty+=i}},{key:"equals",value:function(t){return this.a==t.a&&this.b==t.b&&this.c==t.c&&this.d==t.d&&this.tx==t.tx&&this.ty==t.ty}},{key:"prepend",value:function(t,i,e,n,s,h){var r=this.tx;if(1!=t||0!=i||0!=e||1!=n){var o=this.a,a=this.c;this.a=o*t+this.b*e,this.b=o*i+this.b*n,this.c=a*t+this.d*e,this.d=a*i+this.d*n}return this.tx=r*t+this.ty*e+s,this.ty=r*i+this.ty*n+h,this}},{key:"append",value:function(t,i,e,n,s,h){var r=this.a,o=this.b,a=this.c,c=this.d;return 1==t&&0==i&&0==e&&1==n||(this.a=t*r+i*a,this.b=t*o+i*c,this.c=e*r+n*a,this.d=e*o+n*c),this.tx=s*r+h*a+this.tx,this.ty=s*o+h*c+this.ty,this}},{key:"toString",value:function(){return"(a="+this.a+", b="+this.b+", c="+this.c+", d="+this.d+", tx="+this.tx+", ty="+this.ty+")"}},{key:"getDeterminant",value:function(){return this.a*this.d-this.b*this.c}},{key:"$getScaleX",value:function(){var t=this;if(1==t.a&&0==t.b)return 1;var i=Math.sqrt(t.a*t.a+t.b*t.b);return this.getDeterminant()<0?-i:i}},{key:"$getScaleY",value:function(){var t=this;if(0==t.c&&1==t.d)return 1;var i=Math.sqrt(t.c*t.c+t.d*t.d);return this.getDeterminant()<0?-i:i}},{key:"$getSkewX",value:function(){return Math.atan2(this.d,this.c)-i/2}},{key:"$getSkewY",value:function(){return Math.atan2(this.b,this.a)}}],[{key:"release",value:function(t){t&&e.push(t)}},{key:"create",value:function(){var t=e.pop();return t||(t=new r),t}}]),r}();t.Matrix=n,t.$TempMatrix=new n}(math||(math={})),function(e){var n=[],h=Math.PI/180,t=function(){function s(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;_classCallCheck(this,s),this.x=t,this.y=i}return _createClass(s,[{key:"setTo",value:function(t,i){return this.x=t,this.y=i,this}},{key:"clone",value:function(){return new s(this.x,this.y)}},{key:"equals",value:function(t){return this.x==t.x&&this.y==t.y}},{key:"copyFrom",value:function(t){this.x=t.x,this.y=t.y}},{key:"add",value:function(t){return new s(this.x+t.x,this.y+t.y)}},{key:"normalize",value:function(t){if(0!=this.x||0!=this.y){var i=t/this.length;this.x*=i,this.y*=i}}},{key:"offset",value:function(t,i){this.x+=t,this.y+=i}},{key:"subtract",value:function(t){return new s(this.x-t.x,this.y-t.y)}},{key:"toString",value:function(){return"(x="+this.x+", y="+this.y+")"}},{key:"length",get:function(){return Math.sqrt(this.x*this.x+this.y*this.y)}}],[{key:"release",value:function(t){t&&n.push(t)}},{key:"create",value:function(t,i){var e=n.pop();return e||(e=new s),e.setTo(t,i)}},{key:"distance",value:function(t,i){return Math.sqrt((t.x-i.x)*(t.x-i.x)+(t.y-i.y)*(t.y-i.y))}},{key:"interpolate",value:function(t,i,e){var n=1-e;return new s(t.x*e+i.x*n,t.y*e+i.y*n)}},{key:"polar",value:function(t,i){return new s(t*e.NumberUtils.cos(i/h),t*e.NumberUtils.sin(i/h))}}]),s}();e.Point=t,e.$TempPoint=new t}(math||(math={})),function(t,i){var e=i();t&&t.Vejay||(("undefined"!=typeof global?global:"undefined"!=typeof window?window:this).Vejay=e,"object"==typeof exports&&"object"==typeof module?module.exports=e:"function"==typeof define&&define.amd?define(["Vejay"],i):"object"==typeof exports?exports.Vejay=e:t.Vejay=e)}(this,function(){return Vejay});